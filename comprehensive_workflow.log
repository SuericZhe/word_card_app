2025-03-26 18:25:00,612 - ComprehensiveWorkflow - INFO - 已确保数据库表结构存在: C:\Users\Admin\Desktop\word_card_app\database.db
2025-03-26 18:25:00,613 - ComprehensiveWorkflow - INFO - [sentences] 为 2 个单词生成例句和作文 - 进度: 0%
2025-03-26 18:25:11,307 - ComprehensiveWorkflow - INFO - [essay] 处理作文 - 进度: 20%
2025-03-26 18:25:11,330 - ComprehensiveWorkflow - ERROR - 处理作文时出错: type object 'FeishuFileUtils' has no attribute 'upload_image'
2025-03-26 18:25:11,330 - ComprehensiveWorkflow - INFO - [essay] 作文处理完成 - 进度: 30%
2025-03-26 18:25:11,330 - ComprehensiveWorkflow - INFO - [word] 处理单词 1/2: apple - 进度: 30%
2025-03-26 18:25:11,331 - ComprehensiveWorkflow - INFO - 为单词 'apple' 生成图片
2025-03-26 18:25:39,774 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/auth/v3/tenant_access_token/internal 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12"}, params: [], body: {"app_id": "cli_a769cd7901ac100e", "app_secret": "JaCmFgaAoqvqYnvEiwKBQb2DW5F7CzFf"}
2025-03-26 18:25:40,621 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=0f86fc28432248afb916983abe317534", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='C:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_apple.png'>}>
2025-03-26 18:25:41,393 - ComprehensiveWorkflow - INFO - 为单词 'apple' 的例句生成图片
2025-03-26 18:26:09,842 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=f7dcabd5444e4b37a23a4dbf7db874a5", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='C:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_red_apple_on_the_table..png'>}>
2025-03-26 18:26:10,629 - ComprehensiveWorkflow - INFO - 保存单词图片信息到数据库: apple
2025-03-26 18:26:10,630 - ComprehensiveWorkflow - INFO - 保存句子信息到数据库: apple
2025-03-26 18:26:10,630 - ComprehensiveWorkflow - INFO - 插入内容表: test_comprehensive
2025-03-26 18:26:10,632 - ComprehensiveWorkflow - INFO - 单词 apple 的处理结果已保存到数据库
2025-03-26 18:26:10,632 - ComprehensiveWorkflow - INFO - [word] 单词 apple 处理完成 - 进度: 30%
2025-03-26 18:26:10,632 - ComprehensiveWorkflow - INFO - [word] 处理单词 2/2: bird - 进度: 65%
2025-03-26 18:26:10,633 - ComprehensiveWorkflow - INFO - 为单词 'bird' 生成图片
2025-03-26 18:26:44,708 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=d6983f169d244f5e8e67544605d9c0dc", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='C:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_bird.png'>}>
2025-03-26 18:26:45,508 - ComprehensiveWorkflow - INFO - 为单词 'bird' 的例句生成图片
2025-03-26 18:27:20,236 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=a9167d66892e46f092e409619afbecb5", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='C:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_little_bird_sings_high..png'>}>
2025-03-26 18:27:21,151 - ComprehensiveWorkflow - INFO - 保存单词图片信息到数据库: bird
2025-03-26 18:27:21,151 - ComprehensiveWorkflow - INFO - 保存句子信息到数据库: bird
2025-03-26 18:27:21,151 - ComprehensiveWorkflow - INFO - 更新内容表: test_comprehensive
2025-03-26 18:27:21,153 - ComprehensiveWorkflow - INFO - 单词 bird 的处理结果已保存到数据库
2025-03-26 18:27:21,153 - ComprehensiveWorkflow - INFO - [word] 单词 bird 处理完成 - 进度: 65%
2025-03-26 18:27:21,153 - ComprehensiveWorkflow - INFO - 全部 2 个单词处理完成，耗时：140.54秒
2025-03-26 18:27:21,153 - ComprehensiveWorkflow - INFO - [complete] 全部 2 个单词处理完成 - 进度: 100%
2025-03-26 18:27:21,155 - ComprehensiveWorkflow - INFO - 综合处理结果已保存到: C:\Users\Admin\Desktop\word_card_app\results\comprehensive\comprehensive_test_comprehensive_20250326_182500.json
2025-03-26 18:38:05,555 - __main__ - INFO - 开始测试处理单词: bus, car
2025-03-26 18:38:05,557 - ComprehensiveWorkflow - INFO - 已确保数据库表结构存在: c:\Users\Admin\Desktop\word_card_app\database.db
2025-03-26 18:38:05,557 - ComprehensiveWorkflow - INFO - [sentences] 为 2 个单词生成例句和作文 - 进度: 0%
2025-03-26 18:38:05,557 - __main__ - INFO - 进度更新: {"stage": "sentences", "message": "为 2 个单词生成例句和作文", "progress": 0, "word": null}
2025-03-26 18:38:21,485 - ComprehensiveWorkflow - INFO - [essay] 处理作文 - 进度: 20%
2025-03-26 18:38:21,485 - __main__ - INFO - 进度更新: {"stage": "essay", "message": "处理作文", "progress": 20, "word": null}
2025-03-26 18:38:21,506 - ComprehensiveWorkflow - ERROR - 处理作文时出错: type object 'FeishuFileUtils' has no attribute 'upload_image'
2025-03-26 18:38:21,506 - ComprehensiveWorkflow - INFO - [essay] 作文处理完成 - 进度: 30%
2025-03-26 18:38:21,506 - __main__ - INFO - 进度更新: {"stage": "essay", "message": "作文处理完成", "progress": 30, "word": null}
2025-03-26 18:38:21,507 - ComprehensiveWorkflow - INFO - [word] 处理单词 1/2: bus - 进度: 30%
2025-03-26 18:38:21,507 - __main__ - INFO - 进度更新: {"stage": "word", "message": "处理单词 1/2: bus", "progress": 30, "word": "bus"}
2025-03-26 18:38:21,508 - ComprehensiveWorkflow - INFO - 为单词 'bus' 生成图片
2025-03-26 18:38:49,341 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/auth/v3/tenant_access_token/internal 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12"}, params: [], body: {"app_id": "cli_a769cd7901ac100e", "app_secret": "JaCmFgaAoqvqYnvEiwKBQb2DW5F7CzFf"}
2025-03-26 18:38:50,304 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=8edb6420b1d0431db6c79d059661e36f", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_bus.png'>}>
2025-03-26 18:38:51,076 - ComprehensiveWorkflow - INFO - 为单词 'bus' 的例句生成图片
2025-03-26 18:39:25,260 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=81534bbb03a743d68da887570ebeac72", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_the_bus_is_yellow!.png'>}>
2025-03-26 18:39:26,099 - ComprehensiveWorkflow - INFO - 保存单词图片信息到数据库: bus
2025-03-26 18:39:26,099 - ComprehensiveWorkflow - INFO - 保存句子信息到数据库: bus
2025-03-26 18:39:26,100 - ComprehensiveWorkflow - INFO - 插入内容表: vehicles
2025-03-26 18:39:26,102 - ComprehensiveWorkflow - INFO - 单词 bus 的处理结果已保存到数据库
2025-03-26 18:39:26,102 - ComprehensiveWorkflow - INFO - [word] 单词 bus 处理完成 - 进度: 30%
2025-03-26 18:39:26,102 - __main__ - INFO - 进度更新: {"stage": "word", "message": "单词 bus 处理完成", "progress": 30, "word": "bus"}
2025-03-26 18:39:26,102 - ComprehensiveWorkflow - INFO - [word] 处理单词 2/2: car - 进度: 65%
2025-03-26 18:39:26,102 - __main__ - INFO - 进度更新: {"stage": "word", "message": "处理单词 2/2: car", "progress": 65, "word": "car"}
2025-03-26 18:39:26,103 - ComprehensiveWorkflow - INFO - 为单词 'car' 生成图片
2025-03-26 18:40:01,209 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=6fe9b244a932442992757889eab887a1", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_car.png'>}>
2025-03-26 18:40:02,081 - ComprehensiveWorkflow - INFO - 为单词 'car' 的例句生成图片
2025-03-26 18:40:32,401 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=780c6a424f88431b898a1785ad4ab3b8", "Authorization": "Bearer t-g1043qipEO7ILNHML26ZXWQDKUCXVIMQSNA276HE"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\captioned_dad_drives_a_car..png'>}>
2025-03-26 18:40:33,283 - ComprehensiveWorkflow - INFO - 保存单词图片信息到数据库: car
2025-03-26 18:40:33,283 - ComprehensiveWorkflow - INFO - 保存句子信息到数据库: car
2025-03-26 18:40:33,284 - ComprehensiveWorkflow - INFO - 更新内容表: vehicles
2025-03-26 18:40:33,286 - ComprehensiveWorkflow - INFO - 单词 car 的处理结果已保存到数据库
2025-03-26 18:40:33,286 - ComprehensiveWorkflow - INFO - [word] 单词 car 处理完成 - 进度: 65%
2025-03-26 18:40:33,286 - __main__ - INFO - 进度更新: {"stage": "word", "message": "单词 car 处理完成", "progress": 65, "word": "car"}
2025-03-26 18:40:33,287 - ComprehensiveWorkflow - INFO - 全部 2 个单词处理完成，耗时：147.73秒
2025-03-26 18:40:33,287 - ComprehensiveWorkflow - INFO - [complete] 全部 2 个单词处理完成 - 进度: 100%
2025-03-26 18:40:33,287 - __main__ - INFO - 进度更新: {"stage": "complete", "message": "全部 2 个单词处理完成", "progress": 100, "word": null}
2025-03-26 18:40:33,288 - ComprehensiveWorkflow - INFO - 综合处理结果已保存到: c:\Users\Admin\Desktop\word_card_app\results\comprehensive\comprehensive_vehicles_20250326_183805.json
2025-03-26 18:40:33,288 - __main__ - INFO - 处理完成，结果：{
  "status": "success",
  "words": [
    {
      "word": "bus",
      "sentence": "The bus is yellow!",
      "status": "success",
      "category": "vehicles",
      "timestamp": "20250326_183821",
      "word_image": {
        "word": "bus",
        "status": "success",
        "original_image_url": "https://s.coze.cn/t/43IFx1pR2sA/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\word_images\\vehicles\\bus_20250326_183847.png",
        "feishu_image_key": "img_v3_02ko_573b4647-00b3-46b2-a41a-5207265cd53g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_bus_20250326183850_8d0b8736.mp3",
        "feishu_audio_key": "file_v3_00ko_c9c68829-51cb-4968-9569-e3e9a2e4b93g",
        "error": null
      },
      "sentence_image": {
        "word": "bus",
        "sentence": "The bus is yellow!",
        "status": "success",
        "sentence_image_url": "https://s.coze.cn/t/zfXbgqjCasQ/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\sentence_images\\vehicles\\bus_sentence_20250326_183922.png",
        "feishu_image_key": "img_v3_02ko_c72820fa-00fd-4b28-b9e1-e193f98e409g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_The_bus_is_yellow__20250326183925_0aaee006.mp3",
        "feishu_audio_key": "file_v3_00ko_60fdcd6c-11e6-4566-8e42-cd3bf58d2b2g",
        "error": null
      },
      "error": null
    },
    {
      "word": "car",
      "sentence": "Dad drives a car.",
      "status": "success",
      "category": "vehicles",
      "timestamp": "20250326_183926",
      "word_image": {
        "word": "car",
        "status": "success",
        "original_image_url": "https://s.coze.cn/t/3Y5oZUKsx_8/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\word_images\\vehicles\\car_20250326_183957.png",
        "feishu_image_key": "img_v3_02ko_820c60de-c42b-4570-be5a-9ccb67b28e9g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_car_20250326184001_5227e010.mp3",
        "feishu_audio_key": "file_v3_00ko_591737d9-129a-40d2-afb8-16a6cdf686fg",
        "error": null
      },
      "sentence_image": {
        "word": "car",
        "sentence": "Dad drives a car.",
        "status": "success",
        "sentence_image_url": "https://s.coze.cn/t/2-Mto7krZJE/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\sentence_images\\vehicles\\car_sentence_20250326_184028.png",
        "feishu_image_key": "img_v3_02ko_80e6242b-195f-437a-b6f2-0f0320182d4g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_Dad_drives_a_car__20250326184032_66533e96.mp3",
        "feishu_audio_key": "file_v3_00ko_8cd4cd02-9514-472a-9be2-fe1dc9d5581g",
        "error": null
      },
      "error": null
    }
  ],
  "essay": {
    "words": [
      "bus",
      "car"
    ],
    "essay": "Look at the bus! It is big. The car is red. We go to the park. Bus and car are fun!",
    "status": "failed",
    "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\essays\\vehicles\\essay_bus_car_20250326_183821.png",
    "feishu_image_key": "",
    "local_audio_path": "",
    "feishu_audio_key": "",
    "error": "type object 'FeishuFileUtils' has no attribute 'upload_image'"
  },
  "timestamp": "20250326_183805",
  "category": "vehicles",
  "error": null,
  "stats": {
    "total_words": 2,
    "processed_words": 2,
    "elapsed_time": 147.72907423973083,
    "success_count": 2,
    "failed_count": 0
  }
}
2025-03-26 18:40:33,292 - __main__ - INFO - 结果已保存到: c:\Users\Admin\Desktop\word_card_app\coze\test_output\test_result.json
2025-03-27 14:51:06,653 - __main__ - INFO - 开始测试处理单词: bus, car
2025-03-27 14:51:06,659 - ComprehensiveWorkflow - INFO - 已确保数据库表结构存在: c:\Users\Admin\Desktop\word_card_app\database.db
2025-03-27 14:51:06,659 - ComprehensiveWorkflow - INFO - [sentences] 为 2 个单词生成例句和作文 - 进度: 0%
2025-03-27 14:51:06,659 - __main__ - INFO - 进度更新: {"stage": "sentences", "message": "为 2 个单词生成例句和作文", "progress": 0, "word": null}
2025-03-27 14:51:22,678 - ComprehensiveWorkflow - INFO - [essay] 处理作文 - 进度: 20%
2025-03-27 14:51:22,679 - __main__ - INFO - 进度更新: {"stage": "essay", "message": "处理作文", "progress": 20, "word": null}
2025-03-27 14:51:22,710 - ComprehensiveWorkflow - INFO - 上传作文图片到飞书: c:\Users\Admin\Desktop\word_card_app\results\essays\vehicles\essay_bus_car_20250327_145122.png
2025-03-27 14:51:22,909 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/auth/v3/tenant_access_token/internal 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12"}, params: [], body: {"app_id": "cli_a769cd7901ac100e", "app_secret": "JaCmFgaAoqvqYnvEiwKBQb2DW5F7CzFf"}
2025-03-27 14:51:23,315 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=90c61bbff0bc48c1bd6852e1e5fc486c", "Authorization": "Bearer t-g1043reP67DAHNKUU2ERN73TZQMLVBHY4RTGMFA7"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\essays\\vehicles\\essay_bus_car_20250327_145122.png'>}>
2025-03-27 14:51:25,447 - ComprehensiveWorkflow - INFO - 作文处理结果已保存到数据库
2025-03-27 14:51:25,447 - ComprehensiveWorkflow - INFO - [essay] 作文处理完成 - 进度: 30%
2025-03-27 14:51:25,447 - __main__ - INFO - 进度更新: {"stage": "essay", "message": "作文处理完成", "progress": 30, "word": null}
2025-03-27 14:51:25,447 - ComprehensiveWorkflow - INFO - [word] 处理单词 1/2: bus - 进度: 30%
2025-03-27 14:51:25,447 - __main__ - INFO - 进度更新: {"stage": "word", "message": "处理单词 1/2: bus", "progress": 30, "word": "bus"}
2025-03-27 14:51:25,448 - ComprehensiveWorkflow - INFO - 为单词 'bus' 生成图片
2025-03-27 14:51:58,314 - ComprehensiveWorkflow - INFO - 上传单词图片到飞书: c:\Users\Admin\Desktop\word_card_app\results\word_images\vehicles\bus_20250327_145156.png
2025-03-27 14:51:58,974 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=3af3694dc7334058a860aaff2cf3ffea", "Authorization": "Bearer t-g1043reP67DAHNKUU2ERN73TZQMLVBHY4RTGMFA7"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\word_images\\vehicles\\bus_20250327_145156.png'>}>
2025-03-27 14:51:59,708 - ComprehensiveWorkflow - INFO - 为单词 'bus' 的例句生成图片
2025-03-27 14:52:32,698 - ComprehensiveWorkflow - INFO - 上传句子图片到飞书: c:\Users\Admin\Desktop\word_card_app\results\sentence_images\vehicles\bus_sentence_20250327_145230.png
2025-03-27 14:52:33,411 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=ad30b766dfa64bbfb4810ca5deab7103", "Authorization": "Bearer t-g1043reP67DAHNKUU2ERN73TZQMLVBHY4RTGMFA7"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\sentence_images\\vehicles\\bus_sentence_20250327_145230.png'>}>
2025-03-27 14:52:34,257 - ComprehensiveWorkflow - INFO - 保存单词图片信息到数据库: bus
2025-03-27 14:52:34,257 - ComprehensiveWorkflow - INFO - 保存句子信息到数据库: bus
2025-03-27 14:52:34,258 - ComprehensiveWorkflow - INFO - 更新内容表: vehicles
2025-03-27 14:52:34,259 - ComprehensiveWorkflow - INFO - 单词 bus 的处理结果已保存到数据库
2025-03-27 14:52:34,259 - ComprehensiveWorkflow - INFO - [word] 单词 bus 处理完成 - 进度: 30%
2025-03-27 14:52:34,260 - __main__ - INFO - 进度更新: {"stage": "word", "message": "单词 bus 处理完成", "progress": 30, "word": "bus"}
2025-03-27 14:52:34,260 - ComprehensiveWorkflow - INFO - [word] 处理单词 2/2: car - 进度: 65%
2025-03-27 14:52:34,260 - __main__ - INFO - 进度更新: {"stage": "word", "message": "处理单词 2/2: car", "progress": 65, "word": "car"}
2025-03-27 14:52:34,261 - ComprehensiveWorkflow - INFO - 为单词 'car' 生成图片
2025-03-27 14:53:12,323 - ComprehensiveWorkflow - INFO - 上传单词图片到飞书: c:\Users\Admin\Desktop\word_card_app\results\word_images\vehicles\car_20250327_145310.png
2025-03-27 14:53:13,312 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=5b15442c6dd24b5983f1c5a67e2be4b8", "Authorization": "Bearer t-g1043reP67DAHNKUU2ERN73TZQMLVBHY4RTGMFA7"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\word_images\\vehicles\\car_20250327_145310.png'>}>
2025-03-27 14:53:14,068 - ComprehensiveWorkflow - INFO - 为单词 'car' 的例句生成图片
2025-03-27 14:53:52,747 - ComprehensiveWorkflow - INFO - 上传句子图片到飞书: c:\Users\Admin\Desktop\word_card_app\results\sentence_images\vehicles\car_sentence_20250327_145350.png
2025-03-27 14:53:53,821 - Lark - DEBUG - POST https://open.feishu.cn/open-apis/im/v1/images 200, headers: {"User-Agent": "oapi-sdk-python/v1.4.12", "Content-Type": "multipart/form-data; boundary=a18b342eec434f5db6a447bcdf579a32", "Authorization": "Bearer t-g1043reP67DAHNKUU2ERN73TZQMLVBHY4RTGMFA7"}, params: [], body: <MultipartEncoder: {'image_type': 'message', 'image': <_io.BufferedReader name='c:\\Users\\Admin\\Desktop\\word_card_app\\results\\sentence_images\\vehicles\\car_sentence_20250327_145350.png'>}>
2025-03-27 14:53:54,602 - ComprehensiveWorkflow - INFO - 保存单词图片信息到数据库: car
2025-03-27 14:53:54,603 - ComprehensiveWorkflow - INFO - 保存句子信息到数据库: car
2025-03-27 14:53:54,603 - ComprehensiveWorkflow - INFO - 更新内容表: vehicles
2025-03-27 14:53:54,604 - ComprehensiveWorkflow - INFO - 单词 car 的处理结果已保存到数据库
2025-03-27 14:53:54,605 - ComprehensiveWorkflow - INFO - [word] 单词 car 处理完成 - 进度: 65%
2025-03-27 14:53:54,605 - __main__ - INFO - 进度更新: {"stage": "word", "message": "单词 car 处理完成", "progress": 65, "word": "car"}
2025-03-27 14:53:54,605 - ComprehensiveWorkflow - INFO - 全部 2 个单词处理完成，耗时：167.95秒
2025-03-27 14:53:54,606 - ComprehensiveWorkflow - INFO - [complete] 全部 2 个单词处理完成 - 进度: 100%
2025-03-27 14:53:54,606 - __main__ - INFO - 进度更新: {"stage": "complete", "message": "全部 2 个单词处理完成", "progress": 100, "word": null}
2025-03-27 14:53:54,607 - ComprehensiveWorkflow - INFO - 综合处理结果已保存到: c:\Users\Admin\Desktop\word_card_app\results\comprehensive\comprehensive_vehicles_20250327_145106.json
2025-03-27 14:53:54,607 - __main__ - INFO - 处理完成，结果：{
  "status": "success",
  "words": [
    {
      "word": "bus",
      "sentence": "I see a big yellow bus.",
      "status": "success",
      "category": "vehicles",
      "timestamp": "20250327_145125",
      "word_image": {
        "word": "bus",
        "status": "success",
        "original_image_url": "https://s.coze.cn/t/1c__p7cKUrs/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\word_images\\vehicles\\bus_20250327_145156.png",
        "feishu_image_key": "img_v3_02kp_75ad0379-7027-42af-9ee4-d5fb05ebe64g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_bus_20250327145158_5e3ccc2a.mp3",
        "feishu_audio_key": "file_v3_00kp_32fe6813-b93f-4fee-818c-b2014fdd6b0g",
        "error": null
      },
      "sentence_image": {
        "word": "bus",
        "sentence": "I see a big yellow bus.",
        "status": "success",
        "sentence_image_url": "https://s.coze.cn/t/Dzvy_ODfYcY/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\sentence_images\\vehicles\\bus_sentence_20250327_145230.png",
        "feishu_image_key": "img_v3_02kp_0d9d6d61-995d-45cf-b801-13e9c8f0327g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_I_see_a_big_yellow_b_20250327145233_de702d0a.mp3",
        "feishu_audio_key": "file_v3_00kp_739621f4-17e2-4b37-ba1b-00aa282e2e9g",
        "error": null
      },
      "error": null
    },
    {
      "word": "car",
      "sentence": "My red car is fast!",
      "status": "success",
      "category": "vehicles",
      "timestamp": "20250327_145234",
      "word_image": {
        "word": "car",
        "status": "success",
        "original_image_url": "https://s.coze.cn/t/sEYpSFoBg2I/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\word_images\\vehicles\\car_20250327_145310.png",
        "feishu_image_key": "img_v3_02kp_ac12074b-2f3f-49c4-8c5d-060d4b0a710g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_car_20250327145313_81f83d98.mp3",
        "feishu_audio_key": "file_v3_00kp_a64791c7-4112-4075-be19-126acf457a3g",
        "error": null
      },
      "sentence_image": {
        "word": "car",
        "sentence": "My red car is fast!",
        "status": "success",
        "sentence_image_url": "https://s.coze.cn/t/MBMegnmutPc/\\",
        "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\sentence_images\\vehicles\\car_sentence_20250327_145350.png",
        "feishu_image_key": "img_v3_02kp_6502088d-145f-481b-8c02-8588f5d3608g",
        "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_My_red_car_is_fast__20250327145353_9d58e05a.mp3",
        "feishu_audio_key": "file_v3_00kp_dbfa7e78-c9c7-4a04-b79a-53d2a2440a2g",
        "error": null
      },
      "error": null
    }
  ],
  "essay": {
    "words": [
      "bus",
      "car"
    ],
    "essay": "Tom rides the bus to school. After school, Mom drives the car. \"Look! A blue bus!\" says Tom. They pass many cars. Tom smiles at his toy car.",
    "status": "success",
    "local_image_path": "c:\\Users\\Admin\\Desktop\\word_card_app\\results\\essays\\vehicles\\essay_bus_car_20250327_145122.png",
    "feishu_image_key": "img_v3_02kp_096ab89e-02b9-42bb-9c5c-cf2fe019944g",
    "local_audio_path": "C:\\Users\\Admin\\Desktop\\word_card_app\\static\\audio\\tts_Tom_rides_the_bus_to_20250327145123_adb7accc.mp3",
    "feishu_audio_key": "file_v3_00kp_eb316330-91b7-4f24-af9c-19ca128fb5cg",
    "error": null
  },
  "timestamp": "20250327_145106",
  "category": "vehicles",
  "error": null,
  "stats": {
    "total_words": 2,
    "processed_words": 2,
    "elapsed_time": 167.94567394256592,
    "success_count": 2,
    "failed_count": 0
  }
}
2025-03-27 14:53:54,611 - __main__ - INFO - 结果已保存到: c:\Users\Admin\Desktop\word_card_app\coze\test_output\test_result.json
